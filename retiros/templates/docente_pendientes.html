{% extends "base.html" %}

{% block title %}
Panel de Retiros - {{ grado.nombre }}
{% endblock %}

{% block content %}

<!-- HEADER PANEL -->
<div class="panel-header mb-4 p-4">

    <div class="d-flex justify-content-between align-items-center flex-wrap gap-3">

        <div>
            <h4 class="fw-bold mb-1">
                {{ grado.nombre }}
            </h4>
            <small class="text-muted">
                Retiros pendientes
            </small>
        </div>

        <div class="live-indicator">
            <span class="live-dot"></span>
            ESPERANDO RETIROS
        </div>

    </div>

</div>


<!-- LISTA DE RETIROS -->
<ul id="listaRetiros" class="list-unstyled d-flex flex-column gap-3">

    {% for retiro in retiros %}
        <li class="retiro-card p-3">

            <div class="d-flex justify-content-between align-items-center">

                <div class="d-flex align-items-center gap-3">

                    <div class="avatar-circle">
                        {{ retiro.alumno.nombre|slice:":1" }}
                    </div>

                    <div>
                        <div class="fw-semibold">
                            {{ retiro.alumno.nombre }}
                        </div>
                        <small class="text-muted">
                            Pendiente de entrega
                        </small>
                    </div>

                </div>

                <a href="{% url 'marcar_entregado' retiro.id %}" 
                   class="btn btn-success btn-sm rounded-pill px-3">
                    Entregar
                </a>

            </div>

        </li>
    {% empty %}
        <li class="empty-state p-5 text-center">
            <div class="mb-2 fs-4">✔</div>
            <div class="fw-semibold">
                No hay alumnos pendientes
            </div>
            <small class="text-muted">
                Todo está al día
            </small>
        </li>
    {% endfor %}

</ul>


<!-- VOLVER -->
<div class="text-center mt-5">
    <a href="{% url 'docente_seleccionar_grado' %}" 
       class="volver-link">
        ← Volver
    </a>
</div>


<style>

/* HEADER */
.panel-header {
    background: #ffffff;
    border-radius: 1.25rem;
    border: 1px solid #e9ecef;
}

/* LIVE */
.live-indicator {
    font-weight: 600;
    font-size: 0.9rem;
    color: #dc3545;
    display: flex;
    align-items: center;
    gap: 8px;
}

.live-dot {
    width: 10px;
    height: 10px;
    background: #dc3545;
    border-radius: 50%;
    animation: pulse 1.4s infinite;
}

@keyframes pulse {
    0% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.4; transform: scale(1.2); }
    100% { opacity: 1; transform: scale(1); }
}

/* TARJETAS */
.retiro-card {
    background: #ffffff;
    border-radius: 1rem;
    border: 1px solid #e9ecef;
    transition: all .25s ease;
}

.retiro-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 30px rgba(0,0,0,0.06);
}

/* Avatar inicial */
.avatar-circle {
    width: 45px;
    height: 45px;
    background: #198754;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
}

/* Estado vacío */
.empty-state {
    background: #ffffff;
    border-radius: 1rem;
    border: 1px dashed #dee2e6;
}

/* Volver */
.volver-link {
    color: #6c757d;
    text-decoration: none;
    font-size: 0.9rem;
}

.volver-link:hover {
    text-decoration: underline;
}

</style>

{% endblock %}
